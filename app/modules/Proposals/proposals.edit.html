<section class="proposal-edit">
  <header ng-show="slot">
    criando palestra para
    <u>{{ slot.room.name }}</u>
    dia <u>{{ slot.begins | date_locale }}</u>,
    às <u>{{ slot.begins | time_locale }}</u>
  </header>

  <form class="lines">
    <p>
      <label>
        <span translate>título da palestra</span>
        <small translate>(de 5 até 80 caracteres)</small>
      </label>
      <input type="text" required focusable
            minlength="5" maxlength="80"
            ng-model="proposal.title"/>
      <i class="fa fa-check"></i>
      <span form-error="title.object_required"     translate>o título da palestra é obrigatório</span>
      <span form-error="title.string_length_short" translate>o título deve ter no mínimo 5 caracteres</span>
      <span form-error="title.string_length_long"  translate>o título deve ter no máximo 80 caracteres</span>
    </p>

    <div class="owner">
      <label ng-class="{'notip':!proposal.owner}">
        <span translate>autor principal</span>
      </label>

      <span ng-show="proposal.owner">
        <span class="id">{{proposal.owner.id}}</span> {{ proposal.owner.email }} ({{ proposal.owner.email }})
        <button type="button" class="small" ng-click="removeOwner()">trocar autor</button>
      </span>
      <span form-error="owner_id.object_required" translate>por favor escolha um autor</span>

      <account-lookup focus-label="owner" on-selected="setOwner" on-register="createOwner" ng-if="!proposal.owner"></account-lookup>

    </div>

    <p>
      <label>
        <span translate>proposta</span>
        <small translate>(até 2000 caracteres)</small>
      </label>
      <textarea required minlength="5" maxlength="2000" focusable
                ng-model="proposal.full" class="large"></textarea>
      <i class="fa fa-check"></i>
      <span form-error="full.object_required"     translate>a proposta completa da palestra é obrigatória</span>
      <span form-error="full.string_length_short" translate>a proposta completa deve ter no mínimo 5 caracteres</span>
      <span form-error="full.string_length_long"  translate>a proposta completa deve ter no máximo 2000 caracteres</span>
    </p>

    <p>
      <label class="notip" translate>trilha</label>
      <select ng-model="proposal.track_id" ng-options="t.id as t.name_pt for t in tracks">
        <option class="empty" value="" ng-hide="proposal.track_id" translate>escolha uma trilha</option>
      </select>
      <span form-error="track_id.object_required" translate>por favor, selectione uma trilha</span>
      <span form-error="track_id.invalid_type" translate>por favor, informe uma trilha válida</span>
    </p>

    <p>
      <label>
        <span translate>língua</span>
      </label>
      <span ng-repeat="lang in languages">
        <input type="radio" id="lang_{{lang.abbr}}" value="{{ lang.abbr }}" ng-model="proposal.language" />
        <label for="lang_{{lang.abbr}}">{{ lang.name | translate }}</label>
      </span>
      <span form-error="language.object_required" translate>a língua da palestra é obrigatória</span>
    </p>

    <p>
      <label>
        <span translate>nível da palestra</span>
      </label>
      <span ng-repeat="level in levels">
        <input type="radio" id="level_{{level}}" value="{{ level }}" ng-model="proposal.level" />
        <label for="level_{{level}}">{{ level | translate }}</label>
      </span>
      <span form-error="level.object_required" translate>o nível técnico da palestra é obrigatório</span>
    </p>

    <div class="coauthors">
      <label class="notip">
        <span translate>co-autores</span>
      </label>

      <div ng-repeat="person in proposal.coauthors">
        <span class="id">{{person.id}}</span>
        <a ui-sref="accounts.detail({ id: person.id })" target="_blank">{{ person.name }}</a>
        ({{ person.email }})
        <button type="button" class="small" ng-click="removeCoauthor($index)">remover</button>
      </div>

      <account-lookup focus-label="coauthor" on-selected="pushCoauthor" on-register="createCoauthor" />
    </div>

    <div class="call_status">
      <label translate>
        situação apresentação
      </label>

      <div>
        <span>
          <input type="radio" id="call_status_pending" value="pending" ng-model="proposal.status" />
          <label for="call_status_pending">pendente</label>
        </span>
        <span>
          <input type="radio" id="call_status_declined" value="declined" ng-model="proposal.status" />
          <label for="call_status_declined">declinado</label>
        </span>
        <span>
          <input type="radio" id="call_status_confirmed" value="confirmed" ng-model="proposal.status" />
          <label for="call_status_confirmed">confirmado</label>
        </span>
      </div>
    </div>

    <div class="slot_status" ng-if="slot">
      <label translate>
        situação horário
      </label>
      {{ slot_status }}
      <div ng-show="slot.id">
        <span>
          <input type="radio" id="slot_status_dirty" value="dirty" ng-model="slot.status" />
          <label for="slot_status_dirty">segurar notificação</label>
        </span>
        <span>
          <input type="radio" id="slot_status_pending" value="pending" ng-model="slot.status" />
          <label for="slot_status_pending">notificar</label>
        </span>
        <span>
          <input type="radio" id="slot_status.declined" value="declined" ng-model="slot.status" />
          <label for="slot_status_declined">declinado</label>
        </span>
        <span>
          <input type="radio" id="slot_status_confirmed" value="confirmed" ng-model="slot.status" />
          <label for="slot_status_confirmed">confirmado</label>
        </span>
      </div>
    </div>


    <aside class="action">
      <button type="button" ng-click="submitAll()">
        criar palestra
      </button>
    </aside>
  </form>

</section>
